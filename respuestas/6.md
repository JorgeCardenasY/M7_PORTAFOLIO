
# Implementación de un CRUD con Django (Patrón MVT)

A continuación se describe cómo la aplicación Django creada cumple con los requisitos de implementar operaciones CRUD (Crear, Leer, Actualizar, Eliminar) utilizando el patrón Modelo-Vista-Template (MVT).

## 1. Modelo (Model)

El archivo `productos/models.py` define la estructura de los datos:

```python
from django.db import models

class Producto(models.Model):
    nombre = models.CharField(max_length=100)
    descripcion = models.TextField()
    precio = models.DecimalField(max_digits=10, decimal_places=2)
    stock = models.IntegerField(default=0)

    def __str__(self):
        return self.nombre
```

Este modelo `Producto` le dice a Django cómo almacenar los datos de los productos en la base de datos.

## 2. Vistas (Views)

Las vistas en `productos/views.py` contienen la lógica de negocio para cada operación CRUD, utilizando vistas basadas en clases genéricas de Django para eficiencia:

```python
from django.views.generic import ListView, CreateView, UpdateView, DeleteView
from django.urls import reverse_lazy
from .models import Producto

# LEER (READ)
class ProductoListView(ListView):
    model = Producto
    template_name = 'productos/lista_productos.html'

# CREAR (CREATE)
class ProductoCreateView(CreateView):
    model = Producto
    fields = ['nombre', 'descripcion', 'precio', 'stock']
    template_name = 'productos/producto_form.html'
    success_url = reverse_lazy('lista_productos')

# ACTUALIZAR (UPDATE)
class ProductoUpdateView(UpdateView):
    model = Producto
    fields = ['nombre', 'descripcion', 'precio', 'stock']
    template_name = 'productos/producto_form.html'
    success_url = reverse_lazy('lista_productos')

# ELIMINAR (DELETE)
class ProductoDeleteView(DeleteView):
    model = Producto
    template_name = 'productos/producto_confirm_delete.html'
    success_url = reverse_lazy('lista_productos')
```

- **`ProductoListView`**: Lee todos los productos de la base de datos y los muestra.
- **`ProductoCreateView`**: Muestra un formulario para crear un nuevo producto y lo guarda en la base de datos.
- **`ProductoUpdateView`**: Muestra un formulario con los datos de un producto existente para editarlo y guarda los cambios.
- **`ProductoDeleteView`**: Pide confirmación y luego elimina un producto de la base de datos.

## 3. Plantillas (Templates)

Las plantillas en `productos/templates/productos/` se encargan de la presentación:

- **`lista_productos.html`**: Muestra la lista de productos (Leer).
- **`producto_form.html`**: Proporciona el formulario para crear y actualizar productos (Crear/Actualizar).
- **`producto_confirm_delete.html`**: Pide confirmación antes de eliminar un producto (Eliminar).
- **`base.html`**: Es la plantilla base que las demás extienden.

## 4. URLs

El archivo `productos/urls.py` mapea las URLs a las vistas correspondientes:

```python
from django.urls import path
from .views import ProductoListView, ProductoCreateView, ProductoUpdateView, ProductoDeleteView

urlpatterns = [
    path('', ProductoListView.as_view(), name='lista_productos'),
    path('nuevo/', ProductoCreateView.as_view(), name='crear_producto'),
    path('<int:pk>/editar/', ProductoUpdateView.as_view(), name='editar_producto'),
    path('<int:pk>/eliminar/', ProductoDeleteView.as_view(), name='eliminar_producto'),
]
```

Este enrutamiento permite que, por ejemplo, una petición a `/productos/nuevo/` sea manejada por `ProductoCreateView`.

## Conclusión

La aplicación implementa un sistema CRUD completo y funcional siguiendo las mejores prácticas de Django. Cada componente del patrón MVT tiene una responsabilidad clara, resultando en un código organizado, mantenible y escalable.
